<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
  <head>
    <title>Tor Metrics Portal: Tools</title>
    <meta http-equiv=Content-Type content="text/html; charset=iso-8859-1">
    <link href="http://www.torproject.org/stylesheet-ltr.css" type=text/css rel=stylesheet>
    <link href="http://www.torproject.org/favicon.ico" type=image/x-icon rel="shortcut icon">
  </head>
  <body>
    <div class="center">
      <table class="banner" border="0" cellpadding="0" cellspacing="0" summary="">
        <tr>
          <td class="banner-left"><a href="https://www.torproject.org/"><img src="http://www.torproject.org/images/top-left.png" alt="Click to go to home page" width="193" heigth="79"></a></td>
          <td class="banner-middle">
            <a href="/">Home</a>
            <a href="graphs.html">Graphs</a>
            <a href="reports.html">Reports</a>
            <a href="papers.html">Papers</a>
            <a href="data.html">Data</a>
            <a class="current">Tools</a>
          </td>
          <td class="banner-right"></td>
        </tr>
      </table>
      <div class="main-column">
        <h2>Tor Metrics Portal: Tools</h2>
        <br/>
        <p>This page contains a collection of tools that can be used to
        gather statistics as provided on the <a href="data.html">data</a>
        page and to process the resulting files to generate
        <a href="graphs.html">graphs</a>.</p>
        <ul>
          <li><a href="#ernie">Metrics portal software</a></li>
          <li><a href="#descdb">Descriptor database</a></li>
          <li><a href="#dirarch">Directory-archive script</a></li>
          <li><a href="#bridgesan">Bridge descriptor sanitizer</a></li>
          <li><a href="#aggregator">Descriptor aggregator</a></li>
          <li><a href="#torperf">Torperf</a></li>
        </ul>
        <br/>
        <a id="ernie"/>
        <h3>Metrics portal software</h3>
        <br/>
        <p>The <a href="graphs.html">graphs</a> on this website are
        generated using ERNIE, the Enhanced R-based tor Network
        Intelligence Engine (why ERNIE? because nobody liked BIRT; sorry
        for misspelling Tor). ERNIE consists of Java code that parses
        the various input data formats and writes CSV files and R code
        that processes the CSV files to generate graphs. Of course, ERNIE
        can be used to generate customized graphs without the need to put
        them on a website.</p>
        <ul>
          <li>Browse the
          <a href="http://gitweb.torproject.org//ernie.git">Git repository</a></li>
          <li><tt>git clone git://git.torproject.org/git/ernie</tt></li>
          <li>Read the <a href="ernie-howto.html">HOWTO</a>
        </ul>
        <br/>
        <font color="gray"><a id="descdb"/>
        <h3>Descriptor database</h3>
        <br/>
        <p>An alternative approach for analyzing the statistical
        <a href="data.html">data</a> is to import them into a local
        database and query it. The descriptor database consist of a
        database schema for PostgreSQL and/or MySQL, Java code to import
        data, and example SQL queries.</p>
        <ul>
          <li><i>(functionality will be included in the <a href="#ernie">metrics portal software</a>)</i></li>
        </ul>
        <br/></font>
        <font color="gray"><a id="dirarch"/>
        <h3>Directory-archive script</h3>
        <br/>
        <p>The directory-archive script consists of a bunch of shell
        scripts that periodically download relay descriptors, sort them
        into a directory structure, and compile monthly tarballs. The
        tarballs are quite similar to the ones provided on the
        <a href="data.html#relaydesc">data</a> page, with a few
        exceptions: the provided tarballs are the result of combining two
        directory-archive script outputs, splitting v3 votes and v3
        consensuses into separate tarballs and replacing all colons in
        filenames with dashes.</p>
        <ul>
          <li>Browse the <a href="http://gitweb.torproject.org//tor.git?a=tree;f=contrib/directory-archive;h=095a4216c06b5afc6274eddd39f0238067377fe4;hb=HEAD">contrib/directory-archive/</a> subdirectory in the Tor sources</a></li>
          <li><tt>git clone git://git.torproject.org/git/tor</tt></li>
          <li><i>(functionality will be included in the <a href="#ernie">metrics portal software</a>)</i></li>
        </ul>
        <br/></font>
        <font color="gray"><a id="bridgesan"/>
        <h3>Bridge descriptor sanitizer</h3>
        <br/>
        <p>The bridge authority Tonga maintains a list of bridges in order
        to serve bridge addresses and descriptors to its clients. Every
        half hour, Tonga takes a snapshot of the known bridge descriptors
        and copies them to byblos for later statistical analysis. As a
        guiding principle, the Tor project makes all data that it uses for
        statistical analysis available to the interested public, in order
        to maximize transparency towards the community. However, the
        bridge descriptors contain the IP addresses and other contact
        information of bridges that must not be made public, or the
        purpose of bridges as non-public entry points into the Tor network
        would be obsolete. This script takes the half-hourly snapshots as
        input, removesall possibly sensitive information from the
        descriptors, and puts out the sanitized bridge descriptors that
        are safe to be published.</p>
        <ul>
          <li>Browse the
          <a href="https://svn.torproject.org/svn/projects/archives/trunk/bridge-desc-sanitizer/">SVN repository</a></li>
          <li><tt>svn co https://svn.torproject.org/svn/projects/archives/trunk/bridge-desc-sanitizer</tt></li>
          <li><i>(functionality will be included in the <a href="#ernie">metrics portal software</a>)</i></li>
        </ul>
        <br/></font>
        <font color="gray"><a id="aggregator"/>
        <h3>Descriptor aggregator</h3>
        <br/>
        <p>The descriptor aggregator is a Java application that combines
        the functionality of the directory-archive script (including the
        postprocessing tasks of merging, splitting, and renaming) and the
        bridge descriptor sanitizer. The descriptor aggregator runs on a
        node that has access to non-sanitized bridge descriptors and
        produces monthly tarballs plus daily updated partial tarballs for
        the current month.</p>
        <ul>
          <li><i>(functionality will be included in the <a href="#ernie">metrics portal software</a>)</i></li>
        </ul>
        <br/></font>
        <a id="torperf"/>
        <h3>Torperf</h3>
        <br/>
        Torperf is a little tool that measures Tor's performance as users
        experience it. Torperf uses a trivial SOCKS client to download
        files of various sizes over the Tor network and notes how long
        substeps take.</p>
        <ul>
          <li>Browse the
          <a href="https://svn.torproject.org/svn/torperf/trunk/">SVN repository</a></li>
          <li><tt>svn co https://svn.torproject.org/svn/torperf/trunk torperf</tt></li>
        </ul>
      </div>
    </div>
    <div class="bottom" id="bottom">
      <p>"Tor" and the "Onion Logo" are <a href="https://www.torproject.org/trademark-faq.html.en">registered trademarks</a> of The Tor Project, Inc.</p>
    </div>
  </body>
</html>

